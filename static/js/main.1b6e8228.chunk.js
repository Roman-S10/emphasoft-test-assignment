(this["webpackJsonpemphasoft-test-assignment"]=this["webpackJsonpemphasoft-test-assignment"]||[]).push([[0],{34:function(e,t,n){e.exports=n(69)},39:function(e,t,n){},40:function(e,t,n){},46:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(30),o=n.n(s),c=(n(39),n(12)),u=n(1),l=(n(40),Object(u.f)((function(e){var t=e.isLoggedIn()?r.a.createElement("button",{type:"button",className:"logout-button",onClick:function(){return e.logOut(),e.history.push("/login")}},"Logout"):null;return r.a.createElement("header",{className:"app-header"},r.a.createElement("span",{className:"logo"},"Emphasoft Test Assignment"),t)}))),i=n(14),m=n(7),h=n(8),p=n(10),g=n(9),f=(n(46),n(18)),d=n.n(f),E=n(32),v=n(19),b=n.n(v),y=function e(){var t=this;Object(m.a)(this,e),this._apiURL="http://emphasoft-test-assignment.herokuapp.com/",this.logIn=function(e,n){return b.a.post("".concat(t._apiURL,"api-token-auth/"),{username:e,password:n}).then((function(e){t.setToken(e.data.token)})).catch((function(e){console.log(e)}))},this.setToken=function(e){localStorage.setItem("emphasoft-auth-token",e)},this.getToken=function(){return localStorage.getItem("emphasoft-auth-token")},this.logOut=function(){localStorage.removeItem("emphasoft-auth-token")},this.isLoggedIn=function(){return t.getToken()},this.getUsers=Object(E.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(t._apiURL,"api/v1/users/"),{headers:{Authorization:"Token ".concat(t.getToken())}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))},w=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",usernameError:"",passwordError:""},e.EmphasoftApiService=new y,e.onInputChange=function(t){var n;e.setState((n={},Object(i.a)(n,t.target.name,t.target.value),Object(i.a)(n,"usernameError",""),Object(i.a)(n,"passwordError",""),n))},e.onFormSubmit=function(t){t.preventDefault(),e.isValide()&&e.EmphasoftApiService.logIn(e.state.username,e.state.password).then((function(){return e.props.history.push("/users")}))},e.isValide=function(){return e.state.username?!!e.state.password||(e.setState({passwordError:"Password must contain at least one character!"}),!1):(e.setState({usernameError:"Username must contain at least one character!"}),!1)},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=e.usernameError,s=e.passwordError;return r.a.createElement("form",{onSubmit:this.onFormSubmit,className:"login-form"},r.a.createElement("h1",null,"Please log in"),r.a.createElement("input",{name:"username",type:"text",onChange:this.onInputChange,value:t,autoFocus:!0,placeholder:"Username"}),a?r.a.createElement("div",{className:"error-message"}," ",a," "):null,r.a.createElement("input",{name:"password",type:"password",onChange:this.onInputChange,value:n,placeholder:"Password"}),s?r.a.createElement("div",{className:"error-message"}," ",s," "):null,r.a.createElement("button",null,"Log in"))}}]),n}(a.Component),S=Object(u.f)(w),O=n(33),k=function(e){var t=e.user,n=t.id,a=t.first_name,s=t.last_name,o=t.username,c=s.length>45?s.substring(0,25)+"...":s;return r.a.createElement("tr",null,r.a.createElement("th",null,n),r.a.createElement("td",null,a),r.a.createElement("td",null,c),r.a.createElement("td",null,o))},j=(n(65),function(){return r.a.createElement("div",{className:"lds-wrapper"},r.a.createElement("div",{className:"lds-ripple"},r.a.createElement("div",null),r.a.createElement("div",null)))}),C=(n(66),n(67),function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={term:""},e.onInputChange=function(t){var n=t.target.value;e.setState({term:n}),e.props.onSearch(n)},e}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement("input",{type:"text",name:"search-panel",placeholder:"Search by username",value:this.state.term,onChange:this.onInputChange})}}]),n}(a.Component)),I=(n(68),function(e){return r.a.createElement("div",{className:"error-message"},e.message)}),L=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={users:[],loading:!0,error:null,sortType:"\ud83e\udc15\ud83e\udc17",searchTerm:""},e.onUsersLoading=function(t){e.setState({users:t,loading:!1})},e.onError=function(t){e.setState({error:t,loading:!1})},e.renderUserList=function(e){return e.map((function(e){return r.a.createElement(k,{user:e,key:e.id})}))},e.sortingById=function(){e.setState((function(e){var t=e.users,n=e.sortType,a=Object(O.a)(t),r="ASC"===n?"DESC":"ASC";return a.sort((function(e,t){return"ASC"===n?t.id-e.id:e.id-t.id})),{users:a,sortType:r}}))},e.onSearch=function(t){e.setState({searchTerm:t.toLowerCase()})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.isLoggedIn()&&this.props.getUsers().then(this.onUsersLoading).catch((function(){return e.onError("Something went wrong, please try again later :)")}))}},{key:"userSearch",value:function(e,t){return e.filter((function(e){return e.username.toLowerCase().includes(t.toLowerCase())}))}},{key:"render",value:function(){if(!this.props.isLoggedIn())return r.a.createElement(u.a,{to:"/login"});var e=this.state,t=e.loading,n=e.users,a=e.searchTerm,s=e.sortType,o=e.error,c=o?r.a.createElement(I,{message:o}):null,l=t?r.a.createElement(j,null):null,i=this.userSearch(n,a),m=t||o?null:r.a.createElement("div",null,r.a.createElement(C,{onSearch:this.onSearch}),r.a.createElement("table",{className:"responsive-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"th-pointer",onClick:this.sortingById},"# ",s),r.a.createElement("th",{scope:"col"},"First Name"),r.a.createElement("th",{scope:"col"},"Last Name"),r.a.createElement("th",{scope:"col"},"Username"))),r.a.createElement("tbody",null,this.renderUserList(i))));return r.a.createElement(r.a.Fragment,null,c,l,m)}}]),n}(a.Component),N=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(h.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(I,{message:"Something went wrong, please try again later :)"}):this.props.children}}]),n}(a.Component);var T=function(){var e=new y;return r.a.createElement(N,null,r.a.createElement(c.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(u.b,{path:"/",render:function(){return r.a.createElement(l,{logOut:e.logOut,isLoggedIn:e.isLoggedIn})}}),r.a.createElement(u.b,{path:"/login",render:function(){return r.a.createElement(S,null)},exact:!0}),r.a.createElement(u.b,{path:"/users",render:function(){return r.a.createElement(L,{getUsers:e.getUsers,isLoggedIn:e.isLoggedIn})}})),r.a.createElement(u.a,{from:"/",to:e.isLoggedIn()?"/users":"/login"})))};o.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.1b6e8228.chunk.js.map